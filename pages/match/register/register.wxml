<!-- æ¯”èµ›æŠ¥åé¡µé¢ -->
<view class="register-container">
  <!-- é¡¶éƒ¨æ¸å˜èƒŒæ™¯ -->
  <view class="top-gradient"></view>

  <scroll-view class="content" scroll-y enable-back-to-top>
    <!-- æ¯”èµ›å¤´éƒ¨å¡ç‰‡ -->
    <view class="hero-card">
      <!-- èƒŒæ™¯è£…é¥° -->
      <view class="hero-bg">
        <view class="circle-1"></view>
        <view class="circle-2"></view>
        <view class="circle-3"></view>
      </view>

      <!-- æ‹›å‹Ÿæ ‡è¯­ -->
      <view class="recruiting-banner">
        <view class="banner-icon pulse">âš½</view>
        <view class="banner-content">
          <text class="banner-title">é˜Ÿå‘˜æ‹›å‹Ÿä¸­</text>
          <text class="banner-subtitle">ä¸ºè£èª‰è€Œæˆ˜</text>
        </view>
        <view class="banner-badge shake">HOT</view>
      </view>

      <!-- å¯¹é˜µä¿¡æ¯ -->
      <view class="match-vs-hero">
        <view class="team-section" bindtap="onSwitchTeam" data-team="team1">
          <view class="team-logo-wrapper float {{currentTeamView === 'team1' ? 'active-team' : ''}}">
            <image class="team-logo-large" src="{{matchInfo.team1.logo}}" mode="aspectFit"></image>
            <view class="logo-glow" style="background: radial-gradient(circle, {{matchInfo.team1.color}}40 0%, transparent 70%);"></view>
          </view>
          <text class="team-name-hero">{{matchInfo.team1.name}}</text>
          <view class="team-count-badge">
            <text class="count-number">{{matchInfo.team1RegisteredCount || 0}}</text>
            <text class="count-label">äººå·²é›†ç»“</text>
          </view>
        </view>

        <view class="vs-section">
          <text class="vs-text-hero">VS</text>
          <view class="vs-line"></view>
        </view>

        <view class="team-section" bindtap="onSwitchTeam" data-team="team2">
          <view class="team-logo-wrapper float float-delay {{currentTeamView === 'team2' ? 'active-team' : ''}}">
            <image class="team-logo-large" src="{{matchInfo.team2.logo}}" mode="aspectFit"></image>
            <view class="logo-glow" style="background: radial-gradient(circle, {{matchInfo.team2.color}}40 0%, transparent 70%);"></view>
          </view>
          <text class="team-name-hero">{{matchInfo.team2.name}}</text>
          <view class="team-count-badge">
            <text class="count-number">{{matchInfo.team2RegisteredCount || 0}}</text>
            <text class="count-label">äººå·²é›†ç»“</text>
          </view>
        </view>
      </view>

      <!-- æ¯”èµ›æ ‡é¢˜ -->
      <view class="match-title-hero">{{matchInfo.title}}</view>

      <!-- å…³é”®ä¿¡æ¯ - å•è¡Œå±•ç¤º -->
      <view class="match-info-row">
        <text class="info-item-text">{{matchInfo.dateMonth}}{{matchInfo.dateDay}}æ—¥ {{matchInfo.time}}</text>
        <text class="info-divider">Â·</text>
        <text class="info-item-text">{{matchInfo.location}}</text>
        <text class="info-divider">Â·</text>
        <text class="info-item-text">{{matchInfo.maxPlayersPerTeam || 11}}äººåˆ¶</text>
      </view>
    </view>

    <!-- å·²æŠ¥åäººå‘˜åˆ—è¡¨ -->
    <view class="roster-section">
      <view class="roster-header">
        <text class="roster-title">å‡ºæˆ˜é˜µå®¹ - {{currentTeamView === 'team1' ? matchInfo.team1.name : matchInfo.team2.name}}</text>
      </view>

      <view class="registered-grid" wx:if="{{registeredPlayers.length > 0}}">
        <view class="player-card fade-in-up" wx:for="{{registeredPlayers}}" wx:key="id" style="animation-delay: {{index * 0.05}}s;">
          <view class="player-avatar-wrapper">
            <image class="player-avatar-new" src="{{item.avatar || '/static/images/default-avatar.png'}}" mode="aspectFill"></image>
            <view class="avatar-ring"></view>
            <text class="player-jersey" wx:if="{{item.jerseyNumber}}">{{item.jerseyNumber}}</text>
          </view>
          <view class="player-details">
            <text class="player-name-new">{{item.realName || item.nickname}}</text>
            <view class="player-tags">
              <position-tag wx:if="{{item.position}}" code="{{item.position}}" size="small"></position-tag>
            </view>
            <text class="player-nickname-new" wx:if="{{item.realName && item.nickname}}">@{{item.nickname}}</text>
          </view>
        </view>
      </view>

      <view class="empty-roster" wx:else>
        <view class="empty-icon">ğŸ‘¥</view>
        <text class="empty-title">è¿˜æ²¡æœ‰é˜Ÿå‘˜æŠ¥å</text>
        <text class="empty-subtitle">æˆä¸ºç¬¬ä¸€ä¸ªæŠ¥åçš„é˜Ÿå‘˜å§ï¼</text>
      </view>
    </view>

    <!-- å¤‡æ³¨ -->
    <view class="remark-section">
      <view class="remark-header">
        <text class="remark-title">å¤‡æ³¨è¯´æ˜</text>
        <text class="optional-tag">é€‰å¡«</text>
      </view>

      <textarea
        class="remark-input"
        placeholder="æœ‰ä»€ä¹ˆæƒ³å¯¹é˜Ÿå‹è¯´çš„å—ï¼Ÿï¼ˆä¾‹å¦‚ï¼šå¯èƒ½è¿Ÿåˆ°ã€æå‰ç¦»å¼€ç­‰ï¼‰"
        placeholder-class="remark-placeholder"
        value="{{remark}}"
        bindinput="onRemarkInput"
        maxlength="200"
        auto-height
      />
    </view>

    <!-- æ¯”èµ›è¯´æ˜ -->
    <view class="notice-section" wx:if="{{matchInfo.description}}">
      <view class="notice-header">
        <view class="notice-icon">ğŸ“¢</view>
        <text class="notice-title">æ¯”èµ›é¡»çŸ¥</text>
      </view>
      <view class="notice-content">
        <text class="notice-text">{{matchInfo.description}}</text>
      </view>
    </view>

    <!-- åº•éƒ¨å ä½ -->
    <view class="bottom-space"></view>
  </scroll-view>

  <!-- åº•éƒ¨æŒ‰é’® - æ ¹æ®æŠ¥åçŠ¶æ€æ˜¾ç¤º -->
  <view class="action-bar">
    <!-- æœªæŠ¥åï¼šæ˜¾ç¤ºæŠ¥åæŒ‰é’® -->
    <view wx:if="{{!isRegistered}}" class="action-btn-single submit-btn-new" catchtap="onSubmit">
      <view class="btn-glow"></view>
      <text class="btn-text">ç«‹å³æŠ¥å</text>
      <text class="btn-icon">âš¡</text>
    </view>

    <!-- å·²æŠ¥åï¼šæ˜¾ç¤ºå–æ¶ˆæŠ¥åæŒ‰é’® -->
    <view wx:else class="action-btn-single cancel-registered-btn" catchtap="onCancel">
      <text class="btn-text">å–æ¶ˆæŠ¥å</text>
    </view>
  </view>
</view>
