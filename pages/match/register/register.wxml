<!-- 比赛报名页面 -->
<view class="register-container">
  <!-- 顶部渐变背景 -->
  <view class="top-gradient"></view>

  <scroll-view class="content" scroll-y enable-back-to-top>
    <!-- 比赛头部卡片 -->
    <view class="hero-card">
      <!-- 背景装饰 -->
      <view class="hero-bg">
        <view class="circle-1"></view>
        <view class="circle-2"></view>
        <view class="circle-3"></view>
      </view>

      <!-- 招募标语 -->
      <view class="recruiting-banner">
        <view class="banner-icon pulse">⚽</view>
        <view class="banner-content">
          <text class="banner-title">队员招募中</text>
          <text class="banner-subtitle">为荣誉而战</text>
        </view>
        <view class="banner-badge shake">HOT</view>
      </view>

      <!-- 对阵信息 -->
      <view class="match-vs-hero">
        <view class="team-section" bindtap="onSwitchTeam" data-team="team1">
          <view class="team-logo-wrapper float {{currentTeamView === 'team1' ? 'active-team' : ''}}">
            <image class="team-logo-large" src="{{matchInfo.team1.logo}}" mode="aspectFit"></image>
            <view class="logo-glow" style="background: radial-gradient(circle, {{matchInfo.team1.color}}40 0%, transparent 70%);"></view>
          </view>
          <text class="team-name-hero">{{matchInfo.team1.name}}</text>
          <view class="team-count-badge">
            <text class="count-number">{{matchInfo.team1RegisteredCount || 0}}</text>
            <text class="count-label">人已集结</text>
          </view>
        </view>

        <view class="vs-section">
          <text class="vs-text-hero">VS</text>
          <view class="vs-line"></view>
        </view>

        <view class="team-section" bindtap="onSwitchTeam" data-team="team2">
          <view class="team-logo-wrapper float float-delay {{currentTeamView === 'team2' ? 'active-team' : ''}}">
            <image class="team-logo-large" src="{{matchInfo.team2.logo}}" mode="aspectFit"></image>
            <view class="logo-glow" style="background: radial-gradient(circle, {{matchInfo.team2.color}}40 0%, transparent 70%);"></view>
          </view>
          <text class="team-name-hero">{{matchInfo.team2.name}}</text>
          <view class="team-count-badge">
            <text class="count-number">{{matchInfo.team2RegisteredCount || 0}}</text>
            <text class="count-label">人已集结</text>
          </view>
        </view>
      </view>

      <!-- 比赛标题 -->
      <view class="match-title-hero">{{matchInfo.title}}</view>

      <!-- 关键信息 - 单行展示 -->
      <view class="match-info-row">
        <text class="info-item-text">{{matchInfo.dateMonth}}{{matchInfo.dateDay}}日 {{matchInfo.time}}</text>
        <text class="info-divider">·</text>
        <text class="info-item-text">{{matchInfo.location}}</text>
        <text class="info-divider">·</text>
        <text class="info-item-text">{{matchInfo.maxPlayersPerTeam || 11}}人制</text>
      </view>
    </view>

    <!-- 已报名人员列表 -->
    <view class="roster-section">
      <view class="roster-header">
        <text class="roster-title">出战阵容 - {{currentTeamView === 'team1' ? matchInfo.team1.name : matchInfo.team2.name}}</text>
      </view>

      <view class="registered-grid" wx:if="{{registeredPlayers.length > 0}}">
        <view class="player-card fade-in-up" wx:for="{{registeredPlayers}}" wx:key="id" style="animation-delay: {{index * 0.05}}s;">
          <view class="player-avatar-wrapper">
            <image class="player-avatar-new" src="{{item.avatar || '/static/images/default-avatar.png'}}" mode="aspectFill"></image>
            <view class="avatar-ring"></view>
            <text class="player-jersey" wx:if="{{item.jerseyNumber}}">{{item.jerseyNumber}}</text>
          </view>
          <view class="player-details">
            <text class="player-name-new">{{item.realName || item.nickname}}</text>
            <view class="player-tags">
              <position-tag wx:if="{{item.position}}" code="{{item.position}}" size="small"></position-tag>
            </view>
            <text class="player-nickname-new" wx:if="{{item.realName && item.nickname}}">@{{item.nickname}}</text>
          </view>
        </view>
      </view>

      <view class="empty-roster" wx:else>
        <view class="empty-icon">👥</view>
        <text class="empty-title">还没有队员报名</text>
        <text class="empty-subtitle">成为第一个报名的队员吧！</text>
      </view>
    </view>

    <!-- 备注 -->
    <view class="remark-section">
      <view class="remark-header">
        <text class="remark-title">备注说明</text>
        <text class="optional-tag">选填</text>
      </view>

      <textarea
        class="remark-input"
        placeholder="有什么想对队友说的吗？（例如：可能迟到、提前离开等）"
        placeholder-class="remark-placeholder"
        value="{{remark}}"
        bindinput="onRemarkInput"
        maxlength="200"
        auto-height
      />
    </view>

    <!-- 比赛说明 -->
    <view class="notice-section" wx:if="{{matchInfo.description}}">
      <view class="notice-header">
        <view class="notice-icon">📢</view>
        <text class="notice-title">比赛须知</text>
      </view>
      <view class="notice-content">
        <text class="notice-text">{{matchInfo.description}}</text>
      </view>
    </view>

    <!-- 底部占位 -->
    <view class="bottom-space"></view>
  </scroll-view>

  <!-- 底部按钮 - 根据报名状态显示 -->
  <view class="action-bar">
    <!-- 未报名：显示报名按钮 -->
    <view wx:if="{{!isRegistered}}" class="action-btn-single submit-btn-new" catchtap="onSubmit">
      <view class="btn-glow"></view>
      <text class="btn-text">立即报名</text>
      <text class="btn-icon">⚡</text>
    </view>

    <!-- 已报名：显示取消报名按钮 -->
    <view wx:else class="action-btn-single cancel-registered-btn" catchtap="onCancel">
      <text class="btn-text">取消报名</text>
    </view>
  </view>
</view>
