<!-- æ•°æ®æ€»è§ˆé¡µé¢ -->
<view class="overview-container">
  <scroll-view class="content" scroll-y enable-back-to-top>
    <!-- èµ›å­£é€‰æ‹©å™¨ -->
    <view class="season-selector" bindtap="onShowSeasonPicker">
      <text class="season-name">{{currentSeasonName || 'å…¨éƒ¨'}}</text>
      <image class="dropdown-icon" src="/static/icons/dropdown.png"></image>
    </view>

    <!-- èµ›å­£é€‰æ‹©å¼¹çª— -->
    <view class="season-picker-mask" wx:if="{{showSeasonPicker}}" bindtap="onHideSeasonPicker">
      <view class="season-picker-modal" catchtap="onPickerModalTap">
        <view class="picker-header">
          <text class="picker-title">é€‰æ‹©èµ›å­£</text>
          <view class="picker-close" bindtap="onHideSeasonPicker">âœ•</view>
        </view>
        <scroll-view class="picker-list" scroll-y>
          <view
            class="picker-item {{item.id === selectedSeasonId ? 'active' : ''}}"
            wx:for="{{seasonOptions}}"
            wx:key="id"
            bindtap="onSelectSeason"
            data-id="{{item.id}}"
            data-name="{{item.name}}"
          >
            <text class="picker-item-name">{{item.name}}</text>
            <image class="picker-check-icon" wx:if="{{item.id === selectedSeasonId}}" src="/static/icons/check.png"></image>
          </view>
        </scroll-view>
      </view>
    </view>

    <!-- æˆ‘çš„æ•°æ® - å¤§å¡ç‰‡è®¾è®¡ -->
    <view class="my-stats-hero-card" bindtap="onViewMyStats">
      <view class="hero-header">
        <view class="user-info">
          <image class="user-avatar" src="{{userInfo.avatar || '/static/images/default-avatar.png'}}" mode="aspectFill"></image>
          <view class="user-text">
            <text class="user-name">{{userInfo.nickname || userInfo.realName || 'çƒå‘˜'}}</text>
            <text class="user-subtitle">æœ¬èµ›å­£æ•°æ®</text>
          </view>
        </view>
        <view class="more-btn">
          <text>è¯¦æƒ…</text>
          <image class="arrow-icon" src="/static/icons/arrow-right.png"></image>
        </view>
      </view>

      <!-- æ ¸å¿ƒ4é¡¹æ•°æ® -->
      <view class="hero-stats-grid">
        <view class="hero-stat-item">
          <view class="stat-icon-wrapper match">
            <image class="stat-icon" src="/static/icons/match.png"></image>
          </view>
          <text class="stat-value">{{myStats.matches}}</text>
          <text class="stat-label">å‚èµ›åœºæ¬¡</text>
        </view>
        <view class="hero-stat-item">
          <view class="stat-icon-wrapper goal">
            <image class="stat-icon" src="/static/icons/goal.png"></image>
          </view>
          <text class="stat-value">{{myStats.goals}}</text>
          <text class="stat-label">è¿›çƒ</text>
        </view>
        <view class="hero-stat-item">
          <view class="stat-icon-wrapper assist">
            <image class="stat-icon" src="/static/icons/assist.png"></image>
          </view>
          <text class="stat-value">{{myStats.assists}}</text>
          <text class="stat-label">åŠ©æ”»</text>
        </view>
        <view class="hero-stat-item">
          <view class="stat-icon-wrapper mvp">
            <image class="stat-icon" src="/static/icons/star.png"></image>
          </view>
          <text class="stat-value">{{myStats.mvp}}</text>
          <text class="stat-label">MVP</text>
        </view>
      </view>

      <!-- ä¸ªäººæ’å -->
      <view class="hero-rankings" wx:if="{{myRankings.goals || myRankings.assists || myRankings.attendance}}">
        <view class="ranking-tag" wx:if="{{myRankings.goals}}">
          <text class="rank-icon">âš½</text>
          <text class="rank-text">å°„æ‰‹æ¦œç¬¬{{myRankings.goals}}å</text>
        </view>
        <view class="ranking-tag" wx:if="{{myRankings.assists}}">
          <text class="rank-icon">ğŸ¯</text>
          <text class="rank-text">åŠ©æ”»æ¦œç¬¬{{myRankings.assists}}å</text>
        </view>
        <view class="ranking-tag" wx:if="{{myRankings.attendance}}">
          <text class="rank-icon">ğŸ“…</text>
          <text class="rank-text">å‡ºå‹¤æ¦œç¬¬{{myRankings.attendance}}å</text>
        </view>
      </view>
    </view>

    <!-- æˆå°±å¾½ç«  -->
    <view class="achievements-card" wx:if="{{achievements.length > 0}}">
      <view class="card-title">
        <text>æˆ‘çš„æˆå°±</text>
        <text class="achievement-count">{{unlockedAchievementCount}}</text>
      </view>
      <scroll-view class="achievements-scroll" scroll-x>
        <view class="achievements-list">
          <view class="achievement-item {{item.unlocked ? 'unlocked' : 'locked'}}" wx:for="{{achievements}}" wx:key="id">
            <view class="achievement-icon">{{item.icon}}</view>
            <text class="achievement-name">{{item.name}}</text>
            <text class="achievement-desc" wx:if="{{item.unlocked}}">{{item.description}}</text>
          </view>
        </view>
      </scroll-view>
    </view>

    <!-- èƒ½åŠ›é›·è¾¾å›¾ - æš‚æ—¶éšè— -->
    <!-- <view class="radar-card" wx:if="{{radarData.length > 0}}">
      <view class="card-title">èƒ½åŠ›åˆ†æ</view>
      <radar-chart
        data="{{radarData}}"
        indicators="{{radarIndicators}}"
        color="#f20810"
        width="500"
        height="500"
      ></radar-chart>
    </view> -->

    <!-- è¿‘æœŸæˆ˜ç»© -->
    <view class="recent-card">
      <view class="card-title">è¿‘æœŸæˆ˜ç»©</view>
      <view class="recent-list" wx:if="{{recentMatches.length > 0}}">
        <view class="recent-item" wx:for="{{recentMatches}}" wx:key="id" bindtap="onMatchTap" data-id="{{item.id}}">
          <view class="recent-left">
            <view class="recent-date">{{item.date}}</view>
            <view class="recent-match-info">
              <view class="recent-result {{item.result}}">
                <text class="result-text">{{item.result === 'win' ? 'èƒœ' : item.result === 'draw' ? 'å¹³' : 'è´Ÿ'}}</text>
              </view>
              <view class="recent-score">{{item.score}}</view>
              <view class="recent-opponent">vs {{item.opponent}}</view>
            </view>
          </view>
          <view class="recent-my-performance" wx:if="{{item.myGoals !== undefined || item.myAssists !== undefined}}">
            <text class="my-perf-label">æˆ‘çš„è¡¨ç°</text>
            <view class="my-perf-stats">
              <text class="perf-item" wx:if="{{item.myGoals > 0}}">{{item.myGoals}}çƒ</text>
              <text class="perf-item" wx:if="{{item.myAssists > 0}}">{{item.myAssists}}åŠ©æ”»</text>
              <text class="perf-item mvp-badge" wx:if="{{item.isMVP}}">â­MVP</text>
              <text class="perf-item no-data" wx:if="{{item.myGoals === 0 && item.myAssists === 0 && !item.isMVP}}">æ— æ•°æ®</text>
            </view>
          </view>
        </view>
      </view>
      <empty-state wx:else icon="/static/images/empty-match.png" text="æš‚æ— æ¯”èµ›è®°å½•"></empty-state>
    </view>

    <!-- èµ›å­£æ€»è§ˆ -->
    <view class="season-overview-card">
      <view class="card-title">èµ›å­£æ€»è§ˆ</view>
      <stats-grid stats="{{overallStatsGrid}}" columns="3"></stats-grid>
    </view>

    <!-- åº•éƒ¨å ä½ -->
    <view class="bottom-space"></view>
  </scroll-view>
</view>
