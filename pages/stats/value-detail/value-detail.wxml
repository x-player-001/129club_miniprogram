<!-- èº«ä»·æ˜ç»†é¡µé¢ -->
<view class="page-container">
  <!-- åŠ è½½ä¸­ -->
  <view class="loading-state" wx:if="{{loading}}">
    <view class="loading-icon"></view>
    <text class="loading-text">åŠ è½½ä¸­...</text>
  </view>

  <block wx:else>
    <!-- ç”¨æˆ·ä¿¡æ¯å¡ç‰‡ -->
    <view class="user-card">
      <view class="user-info">
        <image class="avatar" src="{{userInfo.avatar || images.defaultAvatar}}" mode="aspectFill"></image>
        <view class="user-text">
          <view class="user-name">
            <text class="name">{{userInfo.realName || userInfo.nickname || 'æœªçŸ¥'}}</text>
            <text class="jersey" wx:if="{{userInfo.jerseyNumber}}">{{userInfo.jerseyNumber}}å·</text>
          </view>
          <view class="user-rank" wx:if="{{valueOverview.rank > 0}}">
            <text class="rank-icon">ğŸ…</text>
            <text class="rank-text">èº«ä»·æ¦œç¬¬ {{valueOverview.rank}} å</text>
          </view>
        </view>
      </view>

      <!-- æ€»èº«ä»· -->
      <view class="total-value">
        <text class="value-number">{{valueOverview.totalValue}}</text>
        <text class="value-unit">ä¸‡</text>
      </view>
    </view>

    <!-- èº«ä»·æ„æˆ -->
    <view class="value-breakdown">
      <view class="breakdown-title">èº«ä»·æ„æˆ</view>
      <view class="breakdown-grid">
        <view class="breakdown-item">
          <text class="item-icon">âš½</text>
          <text class="item-value">{{valueOverview.matchValue}}ä¸‡</text>
          <text class="item-label">æ¯”èµ›è´¡çŒ®</text>
        </view>
        <view class="breakdown-item">
          <text class="item-icon">ğŸ› ï¸</text>
          <text class="item-value">{{valueOverview.serviceValue}}ä¸‡</text>
          <text class="item-label">æœåŠ¡è´¡çŒ®</text>
        </view>
        <view class="breakdown-item">
          <text class="item-icon">ğŸ</text>
          <text class="item-value">{{valueOverview.specialValue}}ä¸‡</text>
          <text class="item-label">ç‰¹æ®Šå¥–åŠ±</text>
        </view>
      </view>
    </view>

    <!-- èº«ä»·æ˜ç»†åˆ—è¡¨ -->
    <view class="records-section">
      <view class="section-header">
        <text class="section-title">èº«ä»·æ˜ç»†</text>
      </view>

      <view class="records-list" wx:if="{{records.length > 0}}">
        <view class="record-item" wx:for="{{records}}" wx:key="id">
          <view class="record-icon" style="background: {{item.typeColor}}20; color: {{item.typeColor}}">
            {{item.typeIcon}}
          </view>
          <view class="record-info">
            <view class="record-main">
              <text class="record-type">{{item.typeLabel}}</text>
              <text class="record-match" wx:if="{{item.matchTitle}}">{{item.matchTitle}}</text>
            </view>
            <view class="record-sub">
              <text class="record-desc" wx:if="{{item.description}}">{{item.description}}</text>
              <text class="record-date">{{item.date}}</text>
            </view>
          </view>
          <view class="record-amount {{item.isPositive ? 'positive' : 'negative'}}">
            {{item.isPositive ? '+' : ''}}{{item.amount}}ä¸‡
          </view>
        </view>
      </view>

      <!-- ç©ºçŠ¶æ€ -->
      <view class="empty-state" wx:if="{{!loading && records.length === 0}}">
        <text class="empty-icon">ğŸ“Š</text>
        <text class="empty-text">æš‚æ— èº«ä»·è®°å½•</text>
      </view>

      <!-- åŠ è½½æ›´å¤š -->
      <view class="load-more" wx:if="{{loadingMore}}">
        <text>åŠ è½½ä¸­...</text>
      </view>
      <view class="no-more" wx:if="{{!hasMore && records.length > 0}}">
        <text>- æ²¡æœ‰æ›´å¤šäº† -</text>
      </view>
    </view>

  </block>
</view>
