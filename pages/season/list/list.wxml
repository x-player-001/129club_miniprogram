<!-- pages/season/list/list.wxml -->
<view class="page-container">
  <!-- Tab切换 -->
  <view class="tab-bar">
    <view
      class="tab-item {{currentTab === 'active' ? 'active' : ''}}"
      bindtap="onTabChange"
      data-tab="active">
      进行中
    </view>
    <view
      class="tab-item {{currentTab === 'completed' ? 'active' : ''}}"
      bindtap="onTabChange"
      data-tab="completed">
      已完成
    </view>
    <view
      class="tab-item {{currentTab === '' ? 'active' : ''}}"
      bindtap="onTabChange"
      data-tab="">
      全部
    </view>
  </view>

  <!-- 赛季列表 -->
  <view class="season-list">
    <season-card
      wx:for="{{seasons}}"
      wx:key="id"
      season="{{item}}"
      showActions="{{isAdmin}}"
      showScore="{{true}}"
      bindcardtap="onSeasonTap"
      bindedit="onEdit"
      bindcomplete="onComplete"
      binddelete="onDelete">
    </season-card>

    <!-- 空状态 - 进行中 -->
    <empty-season
      wx:if="{{seasons.length === 0 && !loading && currentTab === 'active'}}"
      type="no-season"
      actionText="{{isAdmin ? '创建赛季' : ''}}"
      bindaction="onCreate">
    </empty-season>

    <!-- 空状态 - 已完成 -->
    <empty-season
      wx:if="{{seasons.length === 0 && !loading && currentTab === 'completed'}}"
      type="no-completed-season">
    </empty-season>

    <!-- 空状态 - 全部 -->
    <empty-season
      wx:if="{{seasons.length === 0 && !loading && currentTab === ''}}"
      type="no-all-season"
      actionText="{{isAdmin ? '创建赛季' : ''}}"
      bindaction="onCreate">
    </empty-season>
  </view>

  <!-- 加载状态 -->
  <view wx:if="{{loading}}" class="loading-container">
    <text class="loading-text">加载中...</text>
  </view>

  <!-- 底部创建按钮（仅管理员可见） -->
  <view class="bottom-actions" wx:if="{{isAdmin}}">
    <view class="create-btn" bindtap="onCreate">
      <text class="btn-text">+ 创建赛季</text>
    </view>
  </view>
</view>
