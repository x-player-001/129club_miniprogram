<!-- ä¸ªäººä¸­å¿ƒé¡µé¢ -->
<view class="profile-container">
  <!-- æ¸¸å®¢æ¨¡å¼ï¼šç™»å½•å¼•å¯¼ -->
  <view wx:if="{{!isLogin}}" class="guest-guide">
    <view class="guest-card">
      <text class="guest-icon">ğŸ‘‹</text>
      <text class="guest-title">æ¬¢è¿æ¥åˆ°129ä¿±ä¹éƒ¨</text>
      <text class="guest-text">ç™»å½•åå¯æŸ¥çœ‹ä¸ªäººæ•°æ®ã€å‚ä¸æ¯”èµ›æŠ¥åç­‰æ›´å¤šåŠŸèƒ½</text>
      <button class="login-btn" bindtap="onGoToLogin">ç«‹å³ç™»å½•</button>
    </view>

    <!-- æ¸¸å®¢å¯ç”¨åŠŸèƒ½ -->
    <view class="menu-section">
      <view class="menu-title">å¯ç”¨åŠŸèƒ½</view>
      <view class="menu-list">
        <menu-item icon="{{icons.notice}}" text="é€šçŸ¥å…¬å‘Š" type="notice" bind:tap="onMenuItemTap"></menu-item>
        <menu-item icon="{{icons.setting}}" text="å…³äºæˆ‘ä»¬" type="about" bind:tap="onMenuItemTap"></menu-item>
      </view>
    </view>
  </view>

  <!-- ç™»å½•æ¨¡å¼ï¼šå®Œæ•´ä¸ªäººä¸­å¿ƒ -->
  <view wx:else>
    <!-- é¡¶éƒ¨èƒŒæ™¯ -->
    <view class="profile-header">
      <view class="header-bg"></view>

      <!-- ç”¨æˆ·ä¿¡æ¯ -->
      <view class="user-card">
        <image class="avatar" src="{{userInfo.avatar || images.defaultAvatar}}" mode="aspectFill"></image>
        <view class="user-info">
          <view class="user-name-row">
            <text class="user-name">{{userInfo.realName || userInfo.nickname || 'æœªè®¾ç½®'}}</text>
            <text class="user-nickname" wx:if="{{userInfo.nickname && userInfo.realName}}"> @{{userInfo.nickname}}</text>
          </view>
          <view class="user-meta">
            <text class="jersey-number" wx:if="{{userInfo.jerseyNumber}}">{{userInfo.jerseyNumber}}å·</text>

            <!-- æ˜¾ç¤ºæ‰€æœ‰ä½ç½® -->
            <block wx:if="{{userInfo.positions && userInfo.positions.length > 0}}">
              <position-tag wx:for="{{userInfo.positions}}" wx:key="*this" code="{{item}}" size="small"></position-tag>
            </block>

            <!-- æƒ¯ç”¨è„šå±•ç¤º -->
            <foot-skill-display
              leftFootSkill="{{userInfo.leftFootSkill}}"
              rightFootSkill="{{userInfo.rightFootSkill}}">
            </foot-skill-display>
          </view>
        </view>
        <view class="edit-btn" bindtap="onEditProfile">
          <image src="{{icons.edit}}" mode="aspectFit"></image>
        </view>
      </view>
    </view>

    <!-- é˜Ÿä¼ä¿¡æ¯ -->
    <view class="team-info-card" wx:if="{{currentTeam}}" bindtap="onGoToTeamDetail">
      <view class="team-badge">
        <image src="{{currentTeam.logo || images.defaultTeam}}" mode="aspectFit"></image>
      </view>
      <view class="team-text">
        <text class="team-name">{{currentTeam.name}}</text>
        <text class="team-role">{{currentTeam.iscaptain ? 'é˜Ÿé•¿' : 'é˜Ÿå‘˜'}}</text>
      </view>
      <image class="arrow" src="{{icons.arrowRightWhite}}" mode="aspectFit"></image>
    </view>

    <!-- åŠŸèƒ½èœå• - ä½¿ç”¨ menu-item ç»„ä»¶ -->
    <view class="menu-section">
      <view class="menu-title">æˆ‘çš„åŠŸèƒ½</view>
      <view class="menu-list">
        <menu-item
          icon="{{icons.jersey}}"
          text="å·ç å¢™"
          type="jersey"
          bind:tap="onMenuItemTap">
        </menu-item>

        <menu-item
          icon="{{icons.users}}"
          text="é˜Ÿå‘˜åˆ—è¡¨"
          type="members"
          bind:tap="onMenuItemTap">
        </menu-item>

        <menu-item
          icon="{{icons.message}}"
          text="æ¶ˆæ¯ä¸­å¿ƒ"
          type="message"
          badge="{{unreadCount}}"
          bind:tap="onMenuItemTap">
        </menu-item>

        <menu-item
          icon="{{icons.notice}}"
          text="é€šçŸ¥å…¬å‘Š"
          type="notice"
          bind:tap="onMenuItemTap">
        </menu-item>

        <!-- åˆ†äº«é…ç½®ï¼ˆä»…è¶…çº§ç®¡ç†å‘˜å¯è§ï¼‰ -->
        <menu-item
          wx:if="{{isSuperAdmin}}"
          icon="{{icons.share}}"
          text="åˆ†äº«é…ç½®"
          type="share-config"
          bind:tap="onMenuItemTap">
        </menu-item>

        <!-- èº«ä»·å½•å…¥ï¼ˆä»…è¶…çº§ç®¡ç†å‘˜å¯è§ï¼‰ -->
        <menu-item
          wx:if="{{isSuperAdmin}}"
          icon="{{icons.valueInput}}"
          text="èº«ä»·å½•å…¥"
          type="value-input"
          bind:tap="onMenuItemTap">
        </menu-item>
      </view>
    </view>

    <view class="menu-section">
      <view class="menu-title">è®¾ç½®</view>
      <view class="menu-list">
        <menu-item
          icon="{{icons.setting}}"
          text="è®¾ç½®"
          type="settings"
          bind:tap="onMenuItemTap">
        </menu-item>
      </view>
    </view>
  </view>

  <!-- ç‰ˆæœ¬ä¿¡æ¯ -->
  <view class="version-info">
    <text>ç‰ˆæœ¬ {{version}}</text>
  </view>

  <!-- åº•éƒ¨å ä½ -->
  <view class="bottom-space"></view>
</view>
