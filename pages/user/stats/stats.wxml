<!-- pages/user/stats/stats.wxml - 重构版 -->
<view class="page-container">
  <!-- 顶部个人信息卡片（金黄色背景 + 球场可视化） -->
  <view class="profile-hero-card">
    <!-- 左侧：用户信息 -->
    <view class="profile-info">
      <image class="profile-avatar" src="{{userInfo.avatar || '/static/images/default-avatar.png'}}" mode="aspectFill"></image>
      <view class="profile-text">
        <text class="profile-name">{{userInfo.realName || userInfo.nickname || '未设置'}}</text>
        <text class="profile-nickname" wx:if="{{userInfo.nickname && userInfo.realName}}">{{userInfo.nickname}}</text>
        <view class="profile-badge">
          <text class="badge-number">{{userInfo.jerseyNumber || '0'}}号</text>
        </view>
      </view>
    </view>

    <!-- 右侧：足球场位置可视化 -->
    <view class="field-wrapper">
      <football-field
        jerseyNumber="{{userInfo.jerseyNumber}}"
        positionCodes="{{userPositionCodes}}"
        bind:markerTap="onPositionMarkerTap">
      </football-field>
    </view>
  </view>

  <!-- 核心数据卡片（4宫格） -->
  <view class="core-stats-section">
    <view class="core-stats-grid">
      <view class="core-stat-item" wx:for="{{coreStats}}" wx:key="label" bindtap="onStatTap" data-type="{{item.type}}">
        <image class="stat-icon" src="{{item.icon}}" mode="aspectFit"></image>
        <text class="stat-value">{{item.value}}</text>
        <text class="stat-label">{{item.label}}</text>
      </view>
    </view>
  </view>

  <!-- 次要数据（2列网格 + 进度条） -->
  <view class="secondary-stats-section">
    <view class="stat-card" wx:for="{{secondaryStats}}" wx:key="label">
      <view class="stat-header">
        <text class="stat-label">{{item.label}}</text>
        <text class="stat-value">{{item.value}}{{item.unit}}</text>
      </view>
      <view class="stat-progress-bar" wx:if="{{item.showProgress}}">
        <view class="progress-fill" style="width: {{item.percent}}%; background: {{item.color}};"></view>
      </view>
    </view>
  </view>

  <!-- 排名荣誉（横向滚动） -->
  <view class="rankings-section" wx:if="{{rankings.length > 0}}">
    <view class="section-title-bar">
      <text class="section-title-text">排名荣誉</text>
    </view>
    <scroll-view class="rankings-scroll" scroll-x>
      <view class="rankings-list">
        <view class="ranking-badge {{item.medal}}" wx:for="{{rankings}}" wx:key="type">
          <text class="ranking-icon">{{item.icon}}</text>
          <text class="ranking-type">{{item.type}}</text>
          <text class="ranking-rank">第{{item.rank}}名</text>
        </view>
      </view>
    </scroll-view>
  </view>

  <!-- 成就徽章区（保留优化） -->
  <view class="achievements-section" wx:if="{{achievements.length > 0}}">
    <view class="section-title-bar">
      <text class="section-title-text">我的成就</text>
      <text class="achievement-count">{{unlockedCount}}/{{achievements.length}}</text>
    </view>
    <scroll-view class="achievements-scroll" scroll-x>
      <view class="achievements-list">
        <view class="achievement-item {{item.unlocked ? 'unlocked' : 'locked'}}" wx:for="{{achievements}}" wx:key="id">
          <view class="achievement-icon">
            <image wx:if="{{item.isImageIcon}}" class="icon-image" src="{{item.icon}}" mode="aspectFit"></image>
            <text wx:else class="icon-emoji">{{item.icon}}</text>
          </view>
          <text class="achievement-name">{{item.name}}</text>
        </view>
      </view>
    </scroll-view>
  </view>

  <!-- 底部占位 -->
  <view class="bottom-space"></view>
</view>
