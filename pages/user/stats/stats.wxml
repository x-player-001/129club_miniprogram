<!-- pages/user/stats/stats.wxml - 全新轻量设计 -->
<view class="page-container">
  <!-- 顶部信息区域 -->
  <view class="header-section">
    <view class="profile-card">
      <!-- 几何装饰元素 -->
      <view class="geo-circle-1"></view>
      <view class="geo-circle-2"></view>
      <view class="geo-triangle"></view>
      <view class="geo-square"></view>
      <view class="geo-football"></view>

      <view class="profile-layout">
        <!-- 头像（左侧独立） -->
        <image class="avatar" src="{{userInfo.avatar || '/static/images/default-avatar.png'}}" mode="aspectFill"></image>

        <!-- 中间：文字信息（姓名、号码、昵称、惯用脚）-->
        <view class="text-column">
          <view class="name-row">
            <text class="name">{{userInfo.realName || userInfo.nickname || '未设置'}}</text>
          </view>
          <text class="number-badge">#{{userInfo.jerseyNumber || '0'}}</text>
          <text class="nickname" wx:if="{{userInfo.nickname && userInfo.realName}}">@{{userInfo.nickname}}</text>

          <!-- 惯用脚（缩小到2/3） -->
          <view class="foot-row">
            <foot-skill-display
              leftFootSkill="{{userInfo.leftFootSkill}}"
              rightFootSkill="{{userInfo.rightFootSkill}}">
            </foot-skill-display>
          </view>
        </view>

        <!-- 右侧：足球场位置可视化 -->
        <view class="field-container">
          <football-field
            jerseyNumber="{{userInfo.jerseyNumber}}"
            positionCodes="{{userPositionCodes}}"
            bind:markerTap="onPositionMarkerTap">
          </football-field>
        </view>
      </view>
    </view>
  </view>

  <!-- 核心数据网格 -->
  <view class="stats-grid-section">
    <view class="stats-grid">
      <view class="stat-card" wx:for="{{coreStats}}" wx:key="label" bindtap="onStatTap" data-type="{{item.type}}">
        <image class="stat-icon" src="{{item.icon}}" mode="aspectFit"></image>
        <text class="stat-value">{{item.value}}</text>
        <text class="stat-label">{{item.label}}</text>
      </view>
    </view>
  </view>

  <!-- 详细数据列表（仅保留胜率和出勤率） -->
  <view class="details-section">
    <view class="detail-row" wx:for="{{secondaryStats}}" wx:key="label" wx:if="{{item.showProgress}}">
      <view class="detail-left">
        <text class="detail-label">{{item.label}}</text>
        <view class="detail-progress">
          <view class="progress-bar">
            <view class="progress-fill" style="width: {{item.percent}}%; background: {{item.color}};"></view>
          </view>
        </view>
      </view>
      <view class="detail-right">
        <text class="detail-value">{{item.value}}</text>
        <text class="detail-unit" wx:if="{{item.unit}}">{{item.unit}}</text>
      </view>
    </view>
  </view>

  <!-- 排名标签云 -->
  <view class="rankings-section" wx:if="{{rankings.length > 0}}">
    <view class="section-title-simple">排名荣誉</view>
    <view class="ranking-tags">
      <view class="rank-tag {{item.medal}}" wx:for="{{rankings}}" wx:key="type">
        <text class="tag-icon">{{item.icon}}</text>
        <text class="tag-text">{{item.type}} NO.{{item.rank}}</text>
      </view>
    </view>
  </view>

  <!-- 成就网格 -->
  <view class="achievements-section" wx:if="{{achievements.length > 0}}">
    <view class="section-header-simple">
      <text class="section-title-simple">我的成就</text>
      <text class="count-badge">{{unlockedCount}}/{{achievements.length}}</text>
    </view>
    <view class="achievement-grid">
      <view class="achievement-mini {{item.unlocked ? 'unlocked' : 'locked'}}" wx:for="{{achievements}}" wx:key="id">
        <view class="achievement-icon-mini">
          <image wx:if="{{item.isImageIcon}}" class="icon-img" src="{{item.icon}}" mode="aspectFit"></image>
          <text wx:else class="icon-emoji">{{item.icon}}</text>
        </view>
        <text class="achievement-name-mini">{{item.name}}</text>
      </view>
    </view>
  </view>

  <!-- 底部占位 -->
  <view class="bottom-space"></view>
</view>
